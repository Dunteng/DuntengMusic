<html>
  <head>
	  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>i5ting_ztree_toc:äº‘å¼€å‘å…¨æ ˆéŸ³ä¹ç¤¾åŒº</title>
		<link href="toc/style/github-bf51422f4bb36427d391e4b75a1daa083c2d840e.css" media="all" rel="stylesheet" type="text/css"/>
		<link href="toc/style/github2-d731afd4f624c99a4b19ad69f3083cd6d02b81d5.css" media="all" rel="stylesheet" type="text/css"/>
		<link href="toc/css/zTreeStyle/zTreeStyle.css" media="all" rel="stylesheet" type="text/css"/>
	  <style>
		pre {
		    counter-reset: line-numbering;
		    border: solid 1px #d9d9d9;
		    border-radius: 0;
		    background: #fff;
		    padding: 0;
		    line-height: 23px;
		    margin-bottom: 30px;
		    white-space: pre;
		    overflow-x: auto;
		    word-break: inherit;
		    word-wrap: inherit;
		}

		pre a::before {
		  content: counter(line-numbering);
		  counter-increment: line-numbering;
		  padding-right: 1em; /* space after numbers */
		  width: 25px;
		  text-align: right;
		  opacity: 0.7;
		  display: inline-block;
		  color: #aaa;
		  background: #eee;
		  margin-right: 16px;
		  padding: 2px 10px;
		  font-size: 13px;
		  -webkit-touch-callout: none;
		  -webkit-user-select: none;
		  -khtml-user-select: none;
		  -moz-user-select: none;
		  -ms-user-select: none;
		  user-select: none;
		}

		pre a:first-of-type::before {
		  padding-top: 10px;
		}

		pre a:last-of-type::before {
		  padding-bottom: 10px;
		}

		pre a:only-of-type::before {
		  padding: 10px;
		}

		.highlight { background-color: #ffffcc } /* RIGHT */
		</style>
  </head>
  <body>
	  <div>
				<div style='width:25%;'>
						<ul id="tree" class="ztree" style='width:100%'>

						</ul>
				</div>
        <div id='readme' style='width:70%;margin-left:20%;'>
          	<article class='markdown-body'>
            	<h1 id="-">äº‘å¼€å‘å…¨æ ˆéŸ³ä¹ç¤¾åŒº</h1>
<h2 id="0-">0.æ¦‚è¿°</h2>
<p><a href="https://juejin.im/post/5d54bbaf518825219c282370">https://juejin.im/post/5d54bbaf518825219c282370</a></p>
<p>##1.è¯¾ç¨‹å¯¼å­¦</p>
<h2 id="2-">2.é¡¹ç›®å‡†å¤‡</h2>
<h3 id="-">é¡¹ç›®åˆå§‹åŒ–</h3>
<h4 id="-">å¼€é€šäº‘å¼€å‘æœåŠ¡</h4>
<p>ç‚¹å‡»å¼€å‘è€…å·¥å…·ä¸­çš„äº‘å¼€å‘å³å¯ã€‚</p>
<pre><code class="lang-js">//app.js
App({
  onLaunch: function () {

    if (!wx.cloud) {
      console.error(&#39;è¯·ä½¿ç”¨ 2.2.3 æˆ–ä»¥ä¸Šçš„åŸºç¡€åº“ä»¥ä½¿ç”¨äº‘èƒ½åŠ›&#39;)
    } else {
      wx.cloud.init({
        // env å‚æ•°è¯´æ˜ï¼š
        //   env å‚æ•°å†³å®šæ¥ä¸‹æ¥å°ç¨‹åºå‘èµ·çš„äº‘å¼€å‘è°ƒç”¨ï¼ˆwx.cloud.xxxï¼‰ä¼šé»˜è®¤è¯·æ±‚åˆ°å“ªä¸ªäº‘ç¯å¢ƒçš„èµ„æº
        //   æ­¤å¤„è¯·å¡«å…¥ç¯å¢ƒ ID, ç¯å¢ƒ ID å¯æ‰“å¼€äº‘æ§åˆ¶å°æŸ¥çœ‹
        //   å¦‚ä¸å¡«åˆ™ä½¿ç”¨é»˜è®¤ç¯å¢ƒï¼ˆç¬¬ä¸€ä¸ªåˆ›å»ºçš„ç¯å¢ƒï¼‰
        env: &#39;dev-r049g&#39;,
        traceUser: true,  //è®°å½•å°ç¨‹åºçš„è®¿é—®è€…
      })
    }

    this.globalData = {}  //å…¨å±€å±æ€§å’Œæ–¹æ³•
  }
})
</code></pre>
<h4 id="tabbar">tabbar</h4>
<p><img src="https://pic1.zhimg.com/v2-19deb38ccb7b019595ce00ab8c608ee8_r.jpg" alt=""></p>
<h2 id="3-">3.æ’­æ”¾åˆ—è¡¨å®ç°</h2>
<pre><code>- ç»„ä»¶åŒ–å¼€å‘æ€æƒ³
- å®šæ—¶è§¦å‘äº‘å‡½æ•°è¯»å–æ•°æ®å¹¶å†™å…¥äº‘æ•°æ®åº“
- çªç ´äº‘å‡½æ•°è¯»å–æ•°æ®æ¡æ•°é™åˆ¶
- äº‘å‡½æ•°è·¯ç”±ä¼˜åŒ–tcb-routerå’Œæ´‹è‘±æ¨¡å‹
</code></pre><h3 id="-">é¦–é¡µè½®æ’­å›¾</h3>
<pre><code class="lang-js">&lt;swiper indicator-dots=&quot;true&quot; autoplay=&quot;true&quot; interval=&quot;2000&quot; duration=&quot;1000&quot; circular=&quot;true&quot;&gt;
  &lt;block wx:for=&quot;{{swiperImgUrls}}&quot;&gt;
    &lt;swiper-item&gt;
      &lt;image src=&quot;{{item.url}}&quot; mode=&quot;widthFix&quot; class=&quot;img&quot;&gt;&lt;/image&gt;
    &lt;/swiper-item&gt;
  &lt;/block&gt;
&lt;/swiper&gt;
</code></pre>
<h3 id="-">ç»„ä»¶åŒ–å¼€å‘æ€æƒ³</h3>
<h4 id="-">æ¦‚è¿°ï¼š</h4>
<p>ç»„ä»¶ï¼šğŸ‘‰åœ¨ç”¨æˆ·ç•Œé¢å¼€å‘é¢†åŸŸï¼Œç»„ä»¶æ˜¯ä¸€ç§é¢å‘ç”¨æˆ·çš„ã€ç‹¬ç«‹çš„ã€å¯å¤ç”¨çš„äº¤äº’å…ƒç´ çš„å°è£…ã€‚</p>
<p>åœ¨å°ç¨‹åºçš„ç»„ä»¶åŒ–å¼€å‘ä¸­ï¼ŒåŒ…æ‹¬å››ä¸ªéƒ¨åˆ†ï¼šã€wxmlç»“æ„ã€‘ã€jsé€»è¾‘ã€‘ã€wxssæ ·å¼ã€‘ã€jsoné…ç½®ã€‘ã€‚</p>
<h4 id="-">ç»„ä»¶åŒ–å¼€å‘çš„æ„ä¹‰ï¼š</h4>
<ul>
<li>ç»„ä»¶åŒ–æ˜¯å¯¹å®ç°çš„åˆ†å±‚ï¼Œæ˜¯æ›´æœ‰æ•ˆçš„ä»£ç ç»„åˆæ–¹å¼</li>
<li>ç»„ä»¶åŒ–æ˜¯å¯¹èµ„æºçš„é‡ç»„å’Œä¼˜åŒ–ï¼Œä»è€Œä½¿é¡¹ç›®èµ„æºç®¡ç†æ›´åˆç†ã€‚</li>
<li>ç»„ä»¶åŒ–å¼€å‘ç²’åº¦æ›´å°ï¼Œæ›´åˆ©äºä¼˜åŒ–ç»´æŠ¤ï¼Œåˆ©äºå•å…ƒæµ‹è¯•ã€‚</li>
<li>æ–¹ä¾¿é‡æ„</li>
</ul>
<h4 id="-">è®¾è®¡åŸåˆ™</h4>
<ul>
<li>é«˜å†…èš</li>
<li>ä½è€¦åˆ</li>
<li>å•ä¸€èŒè´£</li>
<li>é¿å…è¿‡å¤šå‚æ•°ï¼š ç»„ä»¶ä¸€èˆ¬æ˜¯å¯é…ç½®çš„ï¼Œæ¯”å¦‚å°ç¨‹åºè‡ªå¸¦çš„swiperç»„ä»¶é‡Œé¢çš„å¾ˆå¤šå±æ€§éƒ½æ˜¯å¯é…ç½®çš„ã€‚ä½†æ˜¯æˆ‘ä»¬éœ€è¦è®¤è¯†åˆ°ï¼Œç»„ä»¶çš„å¯é…ç½®å‚æ•°ä¸å®œè¿‡å¤šï¼Œä¸”è¦åšå¥½é»˜è®¤å€¼çš„é…ç½®ï¼Œå¦åˆ™å‹å¥½åº¦å¾ˆä½ã€‚</li>
</ul>
<h4 id="-">æœ¬é¡¹ç›®å°è£…çš„ç»„ä»¶</h4>
<ul>
<li>æ­Œå•ç»„ä»¶</li>
<li>æ­Œæ›²ç»„ä»¶</li>
<li>æ­Œæ›²è¿›åº¦æ¡ç»„ä»¶</li>
<li>æ­Œè¯ç»„ä»¶</li>
<li>åŠ¨æ€å¡ç‰‡ç»„ä»¶</li>
<li>åŠ¨æ€æ§åˆ¶ç»„ä»¶</li>
<li>åº•éƒ¨å¼¹çª—ç»„ä»¶</li>
<li>ç™»å½•ç»„ä»¶</li>
<li>æœç´¢ç»„ä»¶</li>
</ul>
<h3 id="-">æ­Œå•ç»„ä»¶å®ç°</h3>
<p>ã€/components/playlist/ã€‘ç¼–å†™ç»„ä»¶å®ç°ï¼Œé€šè¿‡ã€/pages/playlist/playlist.json ã€‘è¿›è¡Œç»„ä»¶å¼•å…¥ã€‚åœ¨é¦–é¡µé€šè¿‡çˆ¶ç»„ä»¶æ·»åŠ å±æ€§ä¼ å€¼ç»™æ­Œå•ç»„ä»¶ã€‚</p>
<p>ä¸€ä¸ªç»†èŠ‚ï¼Œåœ¨æ­Œå•ç»„ä»¶ä¸­çš„æ–‡æœ¬ä»‹ç»éƒ¨åˆ†åªæ˜¾ç¤ºä¸¤è¡Œä¸”å¤šä½™çš„éƒ¨åˆ†ç”¨çœç•¥å·è¡¨ç¤ºğŸ‘‡</p>
<p><img src="https://pic4.zhimg.com/80/v2-77212831d8a8c46a67e9dbe808ce8e1f_hd.jpg" alt=""></p>
<pre><code class="lang-css">.playlist-name{
  font-size: 26rpx;
  line-height: 1.2;
  padding: 2px 0 0 6px;
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp:2;
  overflow: hidden;
  text-overflow: ellipsis;
}
</code></pre>
<p>å¦ä¸€ä¸ªç»†èŠ‚æ˜¯è¦å¤„ç†æ’­æ”¾æ¬¡æ•°ï¼Œå°†å…¶æ ¼å¼åŒ–ï¼Œè¿™é‡Œç”¨åˆ°äº†<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/observer.html"><strong>æ•°æ®ç›‘å¬å™¨observers</strong></a></p>
<pre><code class="lang-js">  observers:{
    // ç›‘å¬playlistItemé‡Œçš„playCountå±æ€§ï¼Œè¿™æ ·ä¸‹é¢è¿™ç§å†™æ³•
    [&#39;playlistItem.playCount&#39;](count){
      // console.log(count)
      //æ ¼å¼åŒ–æ•°æ®ï¼Œä¿ç•™å°æ•°ç‚¹åä¸¤ä½
      // console.log(this._tranNumber(count, 2))
      this.setData({
        _count: this._tranNumber(count,2)  
        //ç”¨dataä¸­çš„_countæ¥å­˜æ”¾ä¿®æ”¹åçš„playlistItem.playCountçš„æ•°æ®,
        //å¦‚æœç›´æ¥å°±å­˜æ”¾ä¸ºè‡ªèº«playlistItem.playCountçš„è¯ä¼šé™·å…¥æ­»å¾ªç¯
        //å³ä¸èƒ½ç»™è¢«ç›‘å¬æ•°æ®æœ¬èº«èµ‹å€¼ä»¥é˜²é™·å…¥æ­»å¾ªç¯  
      })
    }
  },
</code></pre>
<h3 id="-wx-key-promise-async-await-">è¯¦è§£wx:key/promise/async awaitçœ‹è§†é¢‘</h3>
<p>åœ¨äº‘å‡½æ•°é‡Œï¼Œç”±äº Node ç‰ˆæœ¬æœ€ä½æ˜¯ 8.9ï¼Œå› æ­¤æ˜¯å¤©ç„¶æ”¯æŒ async/await è¯­æ³•çš„ã€‚è€Œåœ¨å°ç¨‹åºç«¯åˆ™ä¸ç„¶ã€‚åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·é‡Œï¼Œä»¥åŠ Android ç«¯æ‰‹æœºï¼ˆæµè§ˆå™¨å†…æ ¸æ˜¯ QQæµè§ˆå™¨çš„ X5ï¼‰ï¼Œasync/awaitæ˜¯å¤©ç„¶æ”¯æŒçš„ï¼Œä½† iOS ç«¯æ‰‹æœºåœ¨è¾ƒä½ç‰ˆæœ¬åˆ™ä¸æ”¯æŒï¼Œå› æ­¤éœ€è¦å¼•å…¥é¢å¤–çš„ æ–‡ä»¶ã€‚å¯æŠŠè¿™ä¸ª regenerator/runtime.js æ–‡ä»¶å¼•ç”¨åˆ°æœ‰ä½¿ç”¨ async/await çš„æ–‡ä»¶å½“ä¸­ã€‚</p>
<pre><code>import regeneratorRuntime from &#39;../../utils/runtime.js&#39;
</code></pre><h3 id="-">ã€é‡è¦ã€‘è¯»å–æ­Œå•æ•°æ®å¹¶æ’å…¥äº‘æ•°æ®åº“</h3>
<p>ä»æœåŠ¡å™¨ç«¯å–åˆ°æ­Œå•æ•°æ®ï¼Œå¹¶ä¸”æŠŠæ•°æ®å†™å…¥äº‘æ•°æ®åº“å½“ä¸­ã€‚å…¶ä¸­ï¼Œå‘é€httpè¯·æ±‚åœ¨äº‘å‡½æ•°ä¸­è¿›è¡Œï¼Œç„¶åæŠŠæ•°æ®å†™è¿›äº‘æ•°æ®åº“ä¸­ã€‚æœ¬é¡¹ç›®ç”¨åˆ°çš„ç¬¬ä¸‰æ–¹æœåŠ¡å™¨ç«¯æ•°æ®ä¸º<a href="http://musicapi.xiecheng.live/">http://musicapi.xiecheng.live/</a>ï¼Œæ˜¯ä¸€ä¸ªå¤§ç¥ä»ç½‘æ˜“äº‘éŸ³ä¹æ‰’ä¸‹æ¥çš„æ•°æ®ã€‚</p>
<p>ä¸ºä»€ä¹ˆè¦åœ¨äº‘å‡½æ•°ä¸­è¿›è¡Œå‘¢ï¼Ÿ</p>
<p>å› ä¸ºè¿™ä¸ªæ•°æ®æ˜¯ä»ç¬¬ä¸‰æ–¹è·å–åˆ°çš„ï¼Œå…³é”®æ˜¯è¿™äº›éŸ³ä¹æ­Œå•ç­‰æ•°æ®æ¯å¤©éƒ½ä¼šæ›´æ–°ï¼Œå¦‚æœåªæ˜¯è·å–ä¸€æ¬¡çš„è¯ï¼Œå°±æ— æ³•åšåˆ°æ•°æ®çš„åŠæ—¶æ›´æ–°ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬è¦åœ¨å‡½æ•°ä¸­è®¾ç½®ä¸€ä¸ªå®šæ—¶è§¦å‘å™¨ï¼Œä¹Ÿå°±æ˜¯è¯´ä¼šæ¯å¤©å®šæ—¶çš„ä»æœåŠ¡å™¨ä¸­å–æ•°æ®ï¼Œä»¥ä¿è¯å–åˆ°çš„éƒ½æ˜¯æœ€æ–°çš„æ•°æ®ã€‚å–åˆ°æ–°æ•°æ®åä¸æ—§æ•°æ®è¿›è¡Œæ¯”è¾ƒï¼Œæ— åˆ™æ’å…¥ã€‚è€Œä»¥ä¸Šçš„è¿™äº›åŠŸèƒ½ï¼Œåœ¨äº‘å‡½æ•°ä¸­å®Œæˆæœ€ä¸ºåˆé€‚ã€‚</p>
<h4 id="-">ç¼–å†™å¹¶ä¸Šä¼ äº‘å‡½æ•°</h4>
<p>åœ¨äº‘å‡½æ•°ä¸­ä½¿ç”¨ä¸€ä¸ªåº“<a href="https://github.com/request/request-promise">request-promise</a>æ¥è¿›è¡Œå¯¹æœåŠ¡å™¨ç«¯çš„è¯·æ±‚ã€‚</p>
<p>æˆ‘å†™çš„äº‘å‡½æ•°è·¯å¾„ä¸º<code>/cloudfunctions/getPlaylist</code>ï¼Œåœ¨è¯¥è·¯å¾„ä¸‹å®‰è£…<code>request</code>å’Œ<code>request-promise</code>ã€‚</p>
<pre><code class="lang-js">npm install --save request
npm install --save request-promise
</code></pre>
<p>ç¼–å†™äº‘å‡½æ•°<code>getPlaylist</code>ï¼š</p>
<pre><code class="lang-js">// äº‘å‡½æ•°å…¥å£æ–‡ä»¶
const cloud = require(&#39;wx-server-sdk&#39;)

cloud.init()

// å¼•å…¥request-promiseä¾èµ–
const rp = require(&quot;request-promise&quot;)

const URL = &#39;http://musicapi.xiecheng.live/personalized&#39;
// äº‘å‡½æ•°å…¥å£å‡½æ•°
exports.main = async (event, context) =&gt; {
  const playlist = await rp(URL).then((res) =&gt; {
    // console.log(typeof res) //åœ¨äº‘ç«¯æµ‹è¯•æ‰“å°ç»“æœä¸ºstringï¼Œéœ€è¦å¯¹å…¶è½¬ä¸ºå¯¹è±¡,å¹¶åªå–resultæ•°æ®
    return JSON.parse(res).result
  })
  console.log(playlist)
}
</code></pre>
<p>ç„¶åå³é”®â€œä¸Šä¼ å¹¶éƒ¨ç½²ï¼šäº‘ç«¯å®‰è£…ä¾èµ– ( ä¸ä¸Šä¼ node_modules ) â€ã€‚ä¹‹åå°±å¯ä»¥åœ¨äº‘å¼€å‘ä¸­çš„äº‘å‡½æ•°é‡Œçœ‹åˆ°è¿™ä¸ª<code>getPlaylist</code>äº‘å‡½æ•°ã€‚ç‚¹å‡»äº‘ç«¯æµ‹è¯•å¯ä»¥å¯¹è¯¥å‡½æ•°è¿›è¡Œæµ‹è¯•ã€‚æ³¨æ„æ¯æ¬¡ä¿®æ”¹å®Œäº‘å‡½æ•°åéƒ½è¦é‡æ–°ä¸Šä¼ å¹¶éƒ¨ç½²ã€‚</p>
<h4 id="-">å»ºç«‹äº‘æ•°æ®åº“</h4>
<p>åœ¨äº‘å¼€å‘çš„æ•°æ®åº“ä¸­æ–°å»ºé›†åˆ<code>playlist</code>ï¼Œå°ç¨‹åºçš„äº‘æ•°æ®åº“æ˜¯éå…³ç³»å‹æ•°æ®åº“ï¼Œè¿™é‡Œçš„é›†åˆç±»ä¼¼äºMySQLä¸­çš„è¡¨ã€‚ç„¶åé€šè¿‡äº‘å‡½æ•°ä¸­ä»£ç å°†ä»ç¬¬ä¸‰æ–¹æœåŠ¡å™¨è·å–åˆ°çš„æ•°æ®ä¸€æ¡æ¡åœ°å†™å…¥äº‘æ•°æ®åº“çš„è¡¨ä¸­ã€‚</p>
<pre><code class="lang-js">// äº‘å‡½æ•°å…¥å£æ–‡ä»¶
const cloud = require(&#39;wx-server-sdk&#39;)

cloud.init()

// å¾—åˆ°äº‘æ•°æ®åº“å¯¹è±¡
const db = cloud.database()

// å¼•å…¥request-promiseä¾èµ–
const rp = require(&quot;request-promise&quot;)

const URL = &#39;http://musicapi.xiecheng.live/personalized&#39;
// äº‘å‡½æ•°å…¥å£å‡½æ•°
exports.main = async (event, context) =&gt; {
  const playlist = await rp(URL).then((res) =&gt; {
    // console.log(typeof res) //åœ¨äº‘ç«¯æµ‹è¯•æ‰“å°ç»“æœä¸ºstringï¼Œéœ€è¦å¯¹å…¶è½¬ä¸ºå¯¹è±¡,å¹¶åªå–resultæ•°æ®
    return JSON.parse(res).result
  })
  // console.log(playlist)
  for(let i = 0; i&lt;playlist.length; i++){
    // æ³¨æ„ï¼Œå¾€äº‘æ•°æ®åº“é‡Œæ’å…¥æ•°æ®çš„è¿‡ç¨‹æ˜¯å¼‚æ­¥è¿‡ç¨‹ï¼Œä¹Ÿå¿…é¡»åŠ ä¸Šawaitå…³é”®å­—
    await db.collection(&#39;playlist&#39;).add({
      data:{
        ...playlist[i],//é€šè¿‡ES6å±•å¼€è¿ç®—ç¬¦è¿›è¡Œæ•°æ®çš„å±•å¼€
        createTime: db.serverDate(), //è‡ªå®šä¹‰ä¸€ä¸ªå±æ€§ï¼Œè®°å½•æ•°æ®ç”Ÿæˆçš„æ—¶é—´
      }
    }).then((res)=&gt;{
      console.log(&#39;æ’å…¥æˆåŠŸ&#39;)
    }).catch((err)=&gt;{
      console.error(&#39;æ’å…¥å¤±è´¥&#39;)
    })
  }
}
</code></pre>
<p>ä¸Šé¢ä»£ç éå†äº†ä»ç¬¬ä¸‰æ–¹æœåŠ¡å™¨è·å–åˆ°çš„æ•°æ®å¹¶ä¸€æ¡æ¡æ’å…¥äº†äº‘æ•°æ®åº“é›†åˆä¸­ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯è¿™é‡Œé¢çš„ä¸¤å¤„å¼‚æ­¥æ“ä½œï¼Œéƒ½è¦åŠ ä¸Š<code>await</code>å…³é”®å­—ã€‚</p>
<p>ç„¶åä¸Šä¼ å¹¶éƒ¨ç½²åˆ°äº‘å‡½æ•°ä¸­ï¼Œè¿›è¡Œäº‘ç«¯æµ‹è¯•ï¼Œæµ‹è¯•ç»“æœæ˜¯äº‘æ•°æ®åº“ä¸­æˆåŠŸçš„æ’å…¥äº†æ•°æ®ã€‚</p>
<h4 id="-">æ­Œå•æ•°æ®å»é‡</h4>
<p>è¿™ä¸€æ­¥è¦å®ç°çš„æ˜¯ï¼Œäº‘å‡½æ•°è¯»å–æ•°æ®å¹¶æ’å…¥è¿›äº‘æ•°æ®åº“çš„æ—¶å€™ï¼Œè¦å¯¹äº‘æ•°æ®åº“ä¸­çš„æ•°æ®è¿›è¡Œæ¯”å¯¹ï¼Œå¦‚æœæ•°æ®å·²å­˜åœ¨ï¼Œåˆ™ä¸æ’å…¥ï¼Œå¦åˆ™æ’å…¥ã€‚</p>
<p>å¦‚ä½•è¿›è¡Œæ¯”å¯¹ï¼Œæ¯”å¯¹çš„æ ‡å¿—æ˜¯æ­Œå•æ•°æ®ä¸­çš„<code>id</code>å€¼ã€‚</p>
<p>åœ¨äº‘å‡½æ•°ä¸­è·å–åˆ°äº‘æ•°æ®åº“ä¸­çš„é›†åˆ<code>playlist</code>ï¼Œæ³¨æ„ï¼Œå®ƒä¹Ÿæ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼Œéœ€è¦åŠ ä¸Š<code>await</code></p>
<pre><code class="lang-js">const list = await db.collection(&#39;playlist&#39;).get()
//ä½†æ˜¯äº‘å‡½æ•°è¯»å–æ•°æ®æ¡æ•°æœ‰é™åˆ¶ï¼Œæœ€å¤šåªèƒ½è¯»å–100æ¡ï¼›å¦‚æœæ˜¯åœ¨å°ç¨‹åºç«¯è¯»å–æœ€å¤šåªèƒ½20æ¡
//ä¹‹åä¼šé’ˆå¯¹è¿™ä¸€é—®é¢˜è¿›è¡Œè§£å†³ï¼Œè¿™é‡Œæš‚æ—¶ä¸è¡¨
</code></pre>
<pre><code class="lang-js">// äº‘å‡½æ•°å…¥å£æ–‡ä»¶
const cloud = require(&#39;wx-server-sdk&#39;)

cloud.init()

// å¾—åˆ°äº‘æ•°æ®åº“å¯¹è±¡
const db = cloud.database()
// å¾—åˆ°äº‘æ•°æ®åº“ä¸­playlisté›†åˆå¯¹è±¡
const playlistCollection = db.collection(&#39;playlist&#39;)

// å¼•å…¥request-promiseä¾èµ–
const rp = require(&quot;request-promise&quot;)

const URL = &#39;http://musicapi.xiecheng.live/personalized&#39;
// äº‘å‡½æ•°å…¥å£å‡½æ•°
exports.main = async (event, context) =&gt; {
  // ä»äº‘æ•°æ®åº“ä¸­å–åˆ°çš„æ•°æ®
  const list = await playlistCollection.get()

  // ä»ç¬¬ä¸‰æ–¹æœåŠ¡å™¨ç«¯å–åˆ°çš„æ•°æ®
  const playlist = await rp(URL).then((res) =&gt; {
    // console.log(typeof res) //åœ¨äº‘ç«¯æµ‹è¯•æ‰“å°ç»“æœä¸ºstringï¼Œéœ€è¦å¯¹å…¶è½¬ä¸ºå¯¹è±¡,å¹¶åªå–resultæ•°æ®
    return JSON.parse(res).result
  })
  // console.log(playlist)

  // ä¸‹é¢è¿›è¡Œæ•°æ®å»é‡ï¼Œæ¯”è¾ƒä»æœåŠ¡å™¨ç«¯è·å–åˆ°çš„æ•°æ®å’Œäº‘æ•°æ®åº“ä¸­çš„é›†åˆçš„æ•°æ®æ˜¯å¦é‡å¤
  const newData = []
  for(let i=0, len1=playlist.length; i&lt;len1;i++){
    let flag = true  //ä¸€å¼€å§‹é»˜è®¤ä¸é‡å¤ï¼Œæ ‡å¿—ä¸ºtrue
    for(let j = 0, len2=list.data.length; j&lt;len2; j++){
      if(playlist[i].id===list.data[j].id){
        flag = false  //æ•°æ®é‡å¤äº†ï¼Œæ ‡å¿—ç½®ä¸ºfalse
        break  //æœ‰ä¸€æ¬¡é‡å¤å°±è·³å‡ºå¾ªç¯åˆ¤æ–­
      }
    }
    if (flag) {
      newData.push(playlist[i])
    }
  }
  // åˆ é™¤äº‘æ•°æ®åº“é‡Œçš„æ•°æ®ï¼Œæ ¹æ®whereé‡Œçš„æ¡ä»¶æ¸…ç©ºæ•°æ®
  // try {
  //   return await db.collection(&#39;playlist&#39;).where({
  //     // canDislike: false
  //     type: 0
  //   }).remove()
  // } catch (e) {
  //   console.error(e)
  // }

  for(let i = 0; i&lt;newData.length; i++){
    // æ³¨æ„ï¼Œå¾€äº‘æ•°æ®åº“é‡Œæ’å…¥æ•°æ®çš„è¿‡ç¨‹æ˜¯å¼‚æ­¥è¿‡ç¨‹ï¼Œä¹Ÿå¿…é¡»åŠ ä¸Šawaitå…³é”®å­—
    await playlistCollection.add({
      data:{
        // ...playlist[i],//é€šè¿‡ES6å±•å¼€è¿ç®—ç¬¦è¿›è¡Œæ•°æ®çš„å±•å¼€
        ...newData[i],  //ä¸ç”¨playlistäº†ï¼Œå› ä¸ºæ²¡æœ‰å»é‡ï¼Œåº”ä½¿ç”¨å»é‡åçš„newData
        createTime: db.serverDate(), //è‡ªå®šä¹‰ä¸€ä¸ªå±æ€§ï¼Œè®°å½•æ•°æ®ç”Ÿæˆçš„æ—¶é—´
      }
    }).then((res)=&gt;{
      console.log(&#39;æ’å…¥æˆåŠŸ&#39;)
    }).catch((err)=&gt;{
      console.error(&#39;æ’å…¥å¤±è´¥&#39;)
    })
  }
  console.log(&quot;newdataçš„é•¿åº¦&quot;+newData.length) 
  console.log(&quot;playlistçš„é•¿åº¦&quot;+playlist.length)
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­å®ç°äº†æ•°æ®çš„å»é‡æ“ä½œã€‚åœ¨äº‘å¼€å‘ä¹‹äº‘å‡½æ•°ä¸­è¿›è¡Œäº‘ç«¯æµ‹è¯•ï¼Œç„¶åæŸ¥çœ‹äº‘æ•°æ®åº“ä¸­çš„æ•°æ®ï¼Œå¯ä»¥éªŒè¯ã€‚</p>
<h4 id="-">ã€éš¾ç‚¹ã€‘çªç ´è·å–æ•°æ®æ¡æ•°é™åˆ¶ï¼Œ</h4>
<p>å‰é¢è¯´äº†ï¼Œäº‘å‡½æ•°è¯»å–æ•°æ®æ¡æ•°æœ‰é™åˆ¶ï¼Œæœ€å¤šåªèƒ½è¯»å–100æ¡ï¼›å¦‚æœæ˜¯åœ¨å°ç¨‹åºç«¯è¯»å–æœ€å¤šåªèƒ½20æ¡ã€‚éšç€æ—¶é—´çš„æ”¹å˜ï¼Œæ­Œå•ä¿¡æ¯åªä¼šè¶Šæ¥è¶Šå¤šï¼Œè¿™ä¸ªé™åˆ¶æ˜¯ä¼šå½±å“è¿™ä¸ªé¡¹ç›®çš„ã€‚<code>const list = await playlistCollection.get()</code>ä»¥åŠæ— æ³•æ»¡è¶³éœ€æ±‚äº†ã€‚è¿™ä¸ªé—®é¢˜å¦‚ä½•è§£å†³ï¼Ÿ</p>
<p>ã€è§£å†³æ€è·¯ã€‘ğŸ‘‡</p>
<p>ä¹‹å‰ä½¿ç”¨<code>const list = await playlistCollection.get()</code>ä¼å›¾ä¸€æ¬¡æ€§è·å–åˆ°äº‘æ•°æ®åº“ä¸­playlisté›†åˆçš„æ‰€æœ‰è®°å½•ï¼Œå¦‚æœæ€»æ•°å°äº100ï¼Œé‚£è¿˜å¥½è¯´ï¼Œä½†æ˜¯å®é™…ä¸Šæ•°æ®è‚¯å®šä¼šè¶Šæ¥è¶Šå¤šçš„ã€‚</p>
<p><strong>é‚£ä¹ˆæˆ‘ä»¬å°±æ¯æ¬¡åªè·å–20æ¡æ•°æ®ï¼Œç„¶ååˆ†å¤šæ¬¡è·å–ï¼Œè¿™æ ·å°±å¯ä»¥å…¨éƒ¨è·å¾—äº‘æ•°æ®åº“çš„æ•°æ®ã€‚</strong></p>
<pre><code class="lang-js">const MAX_LIMIT = 20 //æ¯æ¬¡è¯»å–äº‘æ•°æ®åº“çš„æ•°æ®äº‘å‡½æ•°ä¸­ä¸€æ¬¡åªèƒ½è·å–100æ¡ï¼Œå°ç¨‹åºç«¯ä¸€æ¬¡åªèƒ½è·å–20æ¡ï¼Œè¿™é‡Œæˆ‘ä»¬è¿›è¡Œè‡ªå®šä¹‰ä¸€æ¬¡æ€§æœ€å¤§è¯»å–æ•°
// äº‘å‡½æ•°å…¥å£å‡½æ•°
exports.main = async (event, context) =&gt; {
  // ä»äº‘æ•°æ®åº“ä¸­å–åˆ°çš„æ•°æ®
  // const list = await playlistCollection.get() //ä¸é€‚ç”¨äº†ã€‚äº‘å‡½æ•°ä¸­ä¸€æ¬¡åªèƒ½è·å–100æ¡ï¼Œå°ç¨‹åºç«¯ä¸€æ¬¡åªèƒ½è·å–20æ¡
  const countResult = await playlistCollection.count()  //è·å–åˆ°çš„æ˜¯ä¸€ä¸ªå¯¹è±¡{ total: 30, errMsg: &#39;collection.count:ok&#39; }
  const total = countResult.total  //å–åˆ°äº‘æ•°æ®åº“ä¸­playlisté›†åˆçš„è®°å½•çš„æ€»æ¡æ•°
  // å¾—å‡ºéœ€è¦å‘äº‘æ•°æ®åº“åˆ†å¤šæ¬¡è¯»å–æ•°æ®çš„æ‰¹æ¬¡
  const batchTimes = Math.ceil(total/MAX_LIMIT)  
  const tasks = []
  for(let i = 0; i&lt;batchTimes; i++){
    let promise = playlistCollection.skip(i*MAX_LIMIT).limit(MAX_LIMIT).get()
    // è¿™å°±å¾—åˆ°äº†ä»ç¬¬0æ¡å–åˆ°ç¬¬99æ¡ï¼Œä»ç¬¬100æ¡å–åˆ°ç¬¬199æ¡ï¼Œä»ç¬¬200æ¡å–åˆ°ç¬¬299æ¡ã€‚ã€‚ã€‚ï¼ˆå‰ææ˜¯MAX_LIMITä¸º100çš„æ—¶å€™ï¼‰
    tasks.push(promise)
  }
    // console.log(tasks) //é‡Œé¢æ˜¯è‹¥å¹²ä¸ªpromiseå¯¹è±¡
  let list = {
    data:[]
  }
  if(tasks.length&gt;0){
    // ä½¿ç”¨äº†promise.all
    list = (await Promise.all(tasks)).reduce((acc, cur)=&gt;{
      return {
        data: acc.data.concat(cur.data)
      }
    })
  }
  // è‡³æ­¤åˆ†æ‰¹è¯»å–äº‘æ•°æ®åº“çš„æ•°æ®å®Œæˆï¼Œè§£å†³äº†å°ç¨‹åºè¯»å–äº‘æ•°æ®åº“æ•°æ®æ¡æ•°çš„é™åˆ¶
</code></pre>
<p>è¿™é‡Œé¢ç”¨åˆ°äº†ã€promise.allã€‘</p>
<p>åœ¨äº‘å¼€å‘ä¹‹äº‘å‡½æ•°ä¸­è¿›è¡Œäº‘ç«¯æµ‹è¯•ï¼Œç„¶åæŸ¥çœ‹äº‘æ•°æ®åº“ä¸­çš„æ•°æ®ï¼Œå¯ä»¥éªŒè¯</p>
<h4 id="-getplaylist-">è®¾è®¡å®šæ—¶è§¦å‘å™¨ä»¥å®šæ—¶è§¦å‘è·å–æ•°æ®çš„å‡½æ•°getPlaylist()</h4>
<p>å…³äºå®šæ—¶è§¦å‘å™¨<a href="https://developers.weixin.qq.com/miniprogram/dev/wxcloud/guide/functions/triggers.html">https://developers.weixin.qq.com/miniprogram/dev/wxcloud/guide/functions/triggers.html</a></p>
<p>åœ¨getPlaylistå‡½æ•°çš„ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶config.jsonğŸ‘‡</p>
<p>å…¶ä¸­<code>&quot;config&quot;: &quot;0 0 10,14,16,23 * * * *&quot;</code>è¡¨ç¤ºåœ¨æ¯å¤©ä¸Šåˆ10ç‚¹ï¼Œä¸‹åˆ2ç‚¹ï¼Œ4ç‚¹å’Œæ™šä¸Š11ç‚¹è§¦å‘ï¼Œè¿™æ ·æ­Œå•ä¿¡æ¯ä¸€å¤©å°±ä¼šæœ‰å››æ¬¡æ›´æ–°ã€‚ï¼ˆæ›´æ–°çš„æ­Œå•ä¿¡æ¯æ¥è‡ªç½‘æ˜“äº‘éŸ³ä¹æ›´æ–°çš„æ¨èæ­Œå•ï¼‰</p>
<pre><code>{
  &quot;triggers&quot;: [
    {
      &quot;name&quot;: &quot;myTrigger&quot;,
      &quot;type&quot;: &quot;timer&quot;,
      &quot;config&quot;: &quot;0 0 10,14,16,23 * * * *&quot;
    }
  ]
}
</code></pre><p>ä¹‹åè¦ä¸Šä¼ è§¦å‘å™¨ã€‚ç‚¹å‡»å½“å‰äº‘å‡½æ•°getPlaylistï¼Œé¼ æ ‡å³é”®ç‚¹å‡»â€ä¸Šä¼ è§¦å‘å™¨â€œã€‚è¿™æ ·è¿™ä¸ªå®šæ—¶è§¦å‘å™¨æ‰èƒ½ç”Ÿæ•ˆã€‚</p>
<p>åœ¨äº‘å¼€å‘æ§åˆ¶å°çš„äº‘å‡½æ•°ä¸­ï¼Œæœ‰ä¸€ä¸ªâ€œé…ç½®â€é€‰é¡¹ï¼Œç‚¹å‡»ï¼Œæ›´æ”¹é‡Œé¢çš„â€œè¶…æ—¶æ—¶é—´â€ï¼Œæ”¹ä¸º20ç§’æ¯”è¾ƒåˆé€‚ã€‚</p>
<p>è‡³æ­¤ï¼Œäº‘å‡½æ•°<code>getPlaylist</code>çš„å¼€å‘å¤§è‡´å®Œæˆã€‚</p>
<h3 id="-">ä»äº‘æ•°æ®åº“ä¸­è·å–æ•°æ®å¹¶æ¸²æŸ“åˆ°é¡µé¢ä¸­</h3>
<h4 id="-music-">æ–°å»ºmusicäº‘å‡½æ•°</h4>
<p>è¿™ä¸ªmusicäº‘å‡½æ•°ç”¨äºæŸ¥è¯¢æ­Œå•ä¿¡æ¯ã€‚</p>
<p>ã€æ³¨æ„ã€‘ç”±äºæ­Œå•æ•°æ®ä¼šå¾ˆå¤šï¼Œæ‰€ä»¥è¦åšåˆ°<strong>åˆ†é¡µ</strong>çš„æŸ¥è¯¢æ•°æ®ï¼Œä¸”æŸ¥è¯¢ç»“æœæŒ‰æ•°æ®åˆ›å»ºæŒ‰æ—¶é—´å€’åºæ’åº</p>
<pre><code class="lang-js">// äº‘å‡½æ•°å…¥å£æ–‡ä»¶
const cloud = require(&#39;wx-server-sdk&#39;)

cloud.init()

// äº‘å‡½æ•°å…¥å£å‡½æ•°
exports.main = async (event, context) =&gt; {
  // æŸ¥è¯¢æ­Œå•æ•°æ®ï¼Œå¹¶ä¸”æ˜¯åˆ†é¡µæŸ¥è¯¢ï¼ŒæŒ‰æ•°æ®åˆ›å»ºæ—¶é—´å€’åºæ’åº
   return await cloud.database().collection(&#39;playlist&#39;)
   .skip(event.start)
   .limit(event.count)
   .orderBy(&#39;createTime&#39;, &#39;desc&#39;)
   .get()
   .then((res)=&gt;{
     return res
   })
}
</code></pre>
<h4 id="-music-">è°ƒç”¨musicäº‘å‡½æ•°</h4>
<p>æ¥ç€åœ¨<code>miniprogram/pages/playlist/playlist.js</code>ä¸­è°ƒç”¨è¯¥äº‘å‡½æ•°è·å–äº‘æ•°æ®åº“çš„æ­Œå•æ•°æ®ã€‚</p>
<pre><code class="lang-js">  onLoad: function (options) {
    this._getPlaylist()
  },

  _getPlaylist(){
    wx.showLoading({
      title: &#39;åŠ è½½ä¸­&#39;,
    })

    wx.cloud.callFunction({
      name: &#39;music&#39;,
      data: {
        start: this.data.playlist.length,
        count: MAX_LIMIT
      }
    }).then((res) =&gt; {
      // console.log(res)
      this.setData({
        playlist: this.data.playlist.concat(res.result.data) //æ³¨æ„æ˜¯è¿½åŠ æ­Œå•æ•°æ®è€Œéæ›¿æ¢æ­Œå•æ•°æ®
      })
      wx.hideLoading() //è®°å¾—å…³é—­loading
    })
  },
</code></pre>
<h4 id="-">ä¸Šæ‹‰è§¦åº•åˆ·æ–°å’Œä¸‹æ‹‰åˆ·æ–°</h4>
<p>ä¸Šæ‹‰è§¦åº•åˆ·æ–°ğŸ‘‡</p>
<pre><code class="lang-js">  /**
   * é¡µé¢ä¸Šæ‹‰è§¦åº•äº‹ä»¶çš„å¤„ç†å‡½æ•°
   */
  onReachBottom: function () {
    this._getPlaylist()
  },
</code></pre>
<p>ä¸‹æ‹‰åˆ·æ–°å°±æ¯”ä¸Šæ‹‰è§¦åº•å¤æ‚ä¸€ç‚¹</p>
<p>åœ¨<code>/miniprogram/pages/playlist/playlist.json</code>ä¸­è¿›è¡Œå¦‚ä¸‹é…ç½®ğŸ‘‡ </p>
<pre><code class="lang-json">{
  &quot;usingComponents&quot;: {
    &quot;playlist-cmp&quot;: &quot;/components/playlist/cmp&quot;
  },
  &quot;enablePullDownRefresh&quot;: true
}
</code></pre>
<p>å°ç¨‹åºé»˜è®¤æ˜¯ä¸å¼€å¯ä¸‹æ‹‰åˆ·æ–°çš„ï¼Œé€šè¿‡é…ç½®å°†å…¶ç½®ä¸ºå…è®¸ä¸‹æ‹‰åˆ·æ–°</p>
<p>ç„¶åå°±å¯ä»¥åœ¨<strong>onPullDownRefresh</strong>çš„ç›‘å¬å‡½æ•°ä¸­è¿›è¡Œä»£ç ç¼–å†™</p>
<pre><code class="lang-js">  /**
   * é¡µé¢ç›¸å…³äº‹ä»¶å¤„ç†å‡½æ•°--ç›‘å¬ç”¨æˆ·ä¸‹æ‹‰åŠ¨ä½œ
   */
  onPullDownRefresh: function () {
    // ä¸‹æ‹‰åˆ·æ–°åŠ¨ä½œæ˜¯è¦å…ˆæ¸…ç©ºæ•°æ®,ç„¶åå†é‡æ–°è¯·æ±‚æ•°æ®
    this.setData({
      playlist:[]  
    })
    this._getPlaylist()
  },
</code></pre>
<h3 id="-tcb-router">äº‘å‡½æ•°è·¯ç”±ä¼˜åŒ–tcb-router</h3>
<p>å…³äºtcb-routeræˆ‘å†™çš„ä¸€ç¯‡ç¬”è®°ğŸ‘‰<a href="https://juejin.im/post/5dd930385188257353094a2d">https://juejin.im/post/5dd930385188257353094a2d</a></p>
<h4 id="-">èƒŒæ™¯ï¼š</h4>
<p>ä¸€ä¸ªç”¨æˆ·åœ¨ä¸€ä¸ªäº‘ç¯å¢ƒä¸­åªèƒ½åˆ›å»º50ä¸ªäº‘å‡½æ•°ï¼Œä¹‹å‰æ˜¯20ä¸ªï¼Œæ›´å°‘ã€‚å½“æˆ‘ä»¬è¦è·å–æ­Œæ›²ä¿¡æ¯çš„æ—¶å€™å¯èƒ½è¦åˆ›å»ºä¸€ä¸ªäº‘å‡½æ•°ï¼Œè¦è·å–ç”µå½±ä¿¡æ¯çš„æ—¶å€™åˆè¦åˆ›å»ºä¸€ä¸ªäº‘å‡½æ•°ã€‚ã€‚ã€‚ã€‚éšç€ä¸šåŠ¡çš„å¢å¤šï¼Œåˆ›å»ºçš„å¯¹åº”çš„äº‘å‡½æ•°æ•°ç›®è¶Šæ¥è¶Šå¤šï¼Œ50ä¸ªå¯èƒ½ä¸å¤Ÿç”¨ï¼Œè€Œä¸”è¿™ç§åšæ³•ä¹Ÿå¾ˆå†—æ‚ã€‚</p>
<p>æ‰€ä»¥å¸Œæœ›æŠŠç›¸ä¼¼çš„è¯·æ±‚å½’ç±»åˆ°åŒä¸€ä¸ªäº‘å‡½æ•°å¤„ç†ï¼Œæ¯”å¦‚æˆ‘ä»¬æŠŠè·å–éŸ³ä¹ä¿¡æ¯å’Œè·å–ç”µå½±ä¿¡æ¯éƒ½åœ¨åŒä¸€ä¸ªäº‘å‡½æ•°é‡Œå®ç°ï¼Œä»è€Œé¿å…åˆ›å»ºå¤šä¸ªäº‘å‡½æ•°çš„æƒ…å†µã€‚</p>
<p>è¦å®ç°è¿™ä¸€åŠŸèƒ½å°±è¦ç”¨åˆ°ä¸€ä¸ªç¬¬ä¸‰æ–¹åº“â€”â€”<a href="https://github.com/TencentCloudBase/tcb-router">tcb-router</a> ä¸€ä¸ªkoaé£æ ¼çš„äº‘å‡½æ•°è·¯ç”±åº“ã€‚</p>
<h4 id="koa-">koaæ´‹è‘±æ¨¡å‹</h4>
<p>koaæ¡†æ¶é‡‡ç”¨äº†ã€ä¸­é—´ä»¶ã€‘çš„å½¢å¼ï¼Œä¸­é—´ä»¶å¯ä»¥ä»‹å…¥è¯·æ±‚å’Œç›¸åº”çš„å¤„ç†ï¼Œå¯ä»¥ç†è§£æ˜¯ä¸€ä¸ªè½»é‡çº§çš„æ¨¡å—ï¼Œæˆ–è€…åœ¨æˆ‘ä»¬çš„ä»£ç å½“ä¸­æ˜¯ä¸€ä¸ªå‡½æ•°å½¢å¼ã€‚ä¸­é—´ä»¶å¯ä»¥è´Ÿè´£ä¸€ä¸ªç‰¹å®šçš„åŠŸèƒ½ï¼Œé€šè¿‡ä¸€ä¸ª<code>next</code>å‡½æ•°æŠŠæ¯ä¸ªä¸­é—´ä»¶ä¹‹é—´å»ºç«‹å…³ç³»ã€‚</p>
<p>ä»€ä¹ˆæ˜¯ã€æ´‹è‘±æ¨¡å‹ã€‘ï¼Ÿ</p>
<p><img src="https://ask.qcloudimg.com/http-save/yehe-1000017/uuitxvbg4y.jpeg?imageView2/2/w/1620" alt=""></p>
<p><img src="https://images0.cnblogs.com/blog2015/570057/201507/281409123445079.jpg" alt=""></p>
<h4 id="-tcbrouter-">æ–°å»ºtcbRouteräº‘å‡½æ•°â€¢ä¸¾ä¸ªä¾‹å­</h4>
<p>tcb-routerï¼š<a href="https://github.com/TencentCloudBase/tcb-router">https://github.com/TencentCloudBase/tcb-router</a></p>
<p>æˆ‘ä»¬å®ç°ä¸€ä¸ªåŠŸèƒ½ï¼šæŠŠè·å–éŸ³ä¹ä¿¡æ¯å’Œè·å–ç”µå½±ä¿¡æ¯éƒ½åœ¨åŒä¸€ä¸ªäº‘å‡½æ•°é‡Œå®ç°ï¼Œä¸¤è€…éƒ½è¦è·å–<code>ç”¨æˆ·openid</code>å¹¶ä¸”è·å–å„è‡ªçš„ä¿¡æ¯ï¼Œä»è€Œé¿å…åˆ›å»ºå¤šä¸ªäº‘å‡½æ•°çš„æƒ…å†µã€‚</p>
<p>åœ¨tcbRouteräº‘å‡½æ•°çš„ç›®å½•ä¸‹å®‰è£…tcb-routerä¾èµ–ğŸ‘‡</p>
<pre><code>npm install --save tcb-router
</code></pre><p>äº‘å‡½æ•°<strong>tcbRouter</strong></p>
<pre><code class="lang-js">// äº‘å‡½æ•°å…¥å£æ–‡ä»¶
const cloud = require(&#39;wx-server-sdk&#39;)
// å¼•å…¥tcb-router
const TcbRouter = require(&#39;tcb-router&#39;)

cloud.init()

// äº‘å‡½æ•°å…¥å£å‡½æ•°
exports.main = async (event, context) =&gt; {
  // return {event,context}  //çœ‹çœ‹eventå’Œcontextåˆ°åº•æ˜¯å•¥

  // newä¸€ä¸ªTcbRouterå¯¹è±¡,éœ€è¦ä¼ å…¥ä¸€ä¸ªå‚æ•°,æŠŠeventä¼ å…¥
  // è¿™æ—¶å€™tcb-routerå°±ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬å¤„ç†äº‹ä»¶ä¸­çš„å‚æ•°å’Œè·¯ç”±è½¬å‘
  const app = new TcbRouter({event})

  // å…¬å…±è·¯ç”±
  // app.use è¡¨ç¤ºè¯¥ä¸­é—´ä»¶ä¼šé€‚ç”¨äºæ‰€æœ‰çš„è·¯ç”±
  app.use(async (ctx,next)=&gt;{
    console.log(&#39;è¿›å…¥å…¨å±€ä¸­é—´ä»¶&#39;)
    ctx.data = {}
    ctx.data.openId = event.userInfo.openId //é€šè¿‡è¯¥å…¬å…±è·¯ç”±è·å–åˆ°ç”¨æˆ·openid
    await next()  //æ‰§è¡Œä¸€ä¸‹ä¸­é—´ä»¶.è¿™æ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œ,è¦åŠ ä¸Šawait
    console.log(&#39;é€€å‡ºå…¨å±€ä¸­é—´ä»¶&#39;)
  })

  // musicç›¸å…³çš„è·¯ç”±
  app.router(&#39;music&#39;, async (ctx,next)=&gt;{
    console.log(&#39;è¿›å…¥éŸ³ä¹åç§°è·¯ç”±ä¸­é—´ä»¶&#39;)
    ctx.data.musicName = &quot;Let it be&quot;
    await next()  //æ‰§è¡Œä¸€ä¸‹ä¸­é—´ä»¶
    console.log(&#39;é€€å‡ºéŸ³ä¹åç§°è·¯ç”±ä¸­é—´ä»¶&#39;)
  }, async (ctx, next)=&gt;{
    console.log(&#39;è¿›å…¥éŸ³ä¹ç±»å‹è·¯ç”±ä¸­é—´ä»¶&#39;)
    ctx.data.musicType = &#39;æ‘‡æ»šä¹&#39;
    ctx.body = {
      data: ctx.data
    }
    // ctx.body è¿”å›æ•°æ®åˆ°å°ç¨‹åºç«¯
    console.log(&#39;é€€å‡ºéŸ³ä¹ç±»å‹è·¯ç”±ä¸­é—´ä»¶&#39;)
  })

  // movieç›¸å…³çš„è·¯ç”±
  app.router(&#39;movie&#39;, async (ctx,next)=&gt;{
    console.log(&#39;è¿›å…¥ç”µå½±åç§°è·¯ç”±ä¸­é—´ä»¶&#39;)
    ctx.data.movieName = &quot;åƒä¸åƒå¯»&quot;
    await next()  //æ‰§è¡Œä¸€ä¸‹ä¸­é—´ä»¶
    console.log(&#39;é€€å‡ºç”µå½±åç§°è·¯ç”±ä¸­é—´ä»¶&#39;)
  }, async (ctx, next)=&gt;{
    console.log(&#39;è¿›å…¥ç”µå½±ç±»å‹è·¯ç”±ä¸­é—´ä»¶&#39;)
    ctx.data.movieType = &#39;åŠ¨æ¼«&#39;
    ctx.body = {
      data: ctx.data
    }
    // ctx.body è¿”å›æ•°æ®åˆ°å°ç¨‹åºç«¯
    console.log(&#39;é€€å‡ºç”µå½±ç±»å‹è·¯ç”±ä¸­é—´ä»¶&#39;)
  })

  // // å¿…é¡»å†™! éœ€è¦æŠŠå½“å‰çš„æœåŠ¡è¿”å›
  return app.serve()
}
</code></pre>
<p>å°ç¨‹åºç«¯è°ƒç”¨tcbRouterå‡½æ•°ğŸ‘‡</p>
<pre><code class="lang-js"> //demo.js
 getMusicInfo(){
    wx.cloud.callFunction({
      name: &#39;tcbRouter&#39;,
      data: {
        $url: &#39;music&#39;
      }
    }).then((res)=&gt;{
      console.log(res)
    })
  },
  getMovieInfo(){
    wx.cloud.callFunction({
      name: &#39;tcbRouter&#39;,
      data:{
        $url: &#39;movie&#39;
      }
    }).then((res)=&gt;{
      console.log(res)
    })
  },
</code></pre>
<p>ä¸Šé¢è¿™æ®µä»£ç ä¸¤ä¸ªæ–¹æ³•å®é™…ä¸Šè°ƒç”¨çš„éƒ½æ˜¯åŒä¸€ä¸ªäº‘å‡½æ•°<strong>tcbRouter</strong>ï¼Œä½†å®ç°äº†ä¸åŒçš„åŠŸèƒ½ã€‚</p>
<p><img src="https://pic1.zhimg.com/v2-928c9ce713a0d13a92d18d6abe21b910_r.jpg" alt=""></p>
<p>ä¸ºäº†æ›´åŠ ç›´è§‚çš„ä½“ç°ã€æ´‹è‘±æ¨¡å‹ã€‘è¿™ä¸€æ¦‚å¿µåœ¨è¯¥ä¾‹å­ä¸Šçš„åº”ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨äº‘å¼€å‘æ§åˆ¶å°çš„äº‘å‡½æ•°è¿è¡Œæ—¥å¿—ä¸­æŸ¥çœ‹æ‰“å°çš„æ—¥å¿—ğŸ‘‡</p>
<p><img src="https://pic3.zhimg.com/v2-0484ed79f891b5e7b2e82ad95296e6ca_r.jpg" alt=""></p>
<p><img src="https://images0.cnblogs.com/blog2015/570057/201507/281409123445079.jpg" alt=""></p>
<h4 id="tcbrouter-music-">tcbRouterå¯¹musicäº‘å‡½æ•°è¿›è¡Œæ”¹é€ </h4>
<p>å‰é¢è¯´è¿‡ï¼Œæˆ‘ä»¬è¦æŠŠ<strong>ç›¸ä¼¼çš„è¯·æ±‚å½’ç±»åˆ°åŒä¸€ä¸ªäº‘å‡½æ•°å¤„ç†</strong>ã€‚</p>
<p>åœ¨äº‘å‡½æ•°musicæ‰€å¯¹åº”çš„ç›®å½•ä¸‹å®‰è£…tcb-routerä¾èµ–ï¼š</p>
<pre><code class="lang-j">npm install --save tcb-router
</code></pre>
<p>äº‘å‡½æ•°musicğŸ‘‡</p>
<pre><code class="lang-js">// äº‘å‡½æ•°å…¥å£æ–‡ä»¶
const cloud = require(&#39;wx-server-sdk&#39;)
// å¼•å…¥tcb-router
const TcbRouter = require(&#39;tcb-router&#39;)

cloud.init()

// äº‘å‡½æ•°å…¥å£å‡½æ•°
exports.main = async (event, context) =&gt; {
  const app = new TcbRouter({event})

  app.router(&#39;playlist&#39;, async (ctx,next)=&gt;{
    // æŸ¥è¯¢æ­Œå•æ•°æ®ï¼Œå¹¶ä¸”æ˜¯åˆ†é¡µæŸ¥è¯¢ï¼ŒæŒ‰æ•°æ®åˆ›å»ºæ—¶é—´å€’åºæ’åº
    // æ³¨æ„,æ²¡ä½¿ç”¨tcb-routerä¹‹å‰æ˜¯ç”¨returè¿”å›,ç°åœ¨è¦ç”¨ ctx.body è¿”å›æ•°æ®åˆ°å°ç¨‹åºç«¯
    ctx.body = await cloud.database().collection(&#39;playlist&#39;)
      .skip(event.start)
      .limit(event.count)
      .orderBy(&#39;createTime&#39;, &#39;desc&#39;)
      .get()
      .then((res) =&gt; {
        //  console.log(res)
        return res
      })
  })
  // å¿…é¡»å†™! éœ€è¦æŠŠå½“å‰çš„æœåŠ¡è¿”å›
  return app.serve()

}
</code></pre>
<p>é‡æ–°ä¸Šä¼ å¹¶éƒ¨ç½²è¯¥äº‘å‡½æ•°ã€‚</p>
<p>é€šè¿‡tcb-routeræ”¹é€ åï¼Œè°ƒç”¨musicäº‘å‡½æ•°çš„æ–¹å¼ä¹Ÿè¦è¿›è¡Œä¿®æ”¹ğŸ‘‡</p>
<pre><code class="lang-js">  ///miniprogram/pages/playlist/playlist.js 

  _getPlaylist(){
    wx.showLoading({
      title: &#39;åŠ è½½ä¸­&#39;,
    })

    wx.cloud.callFunction({
      name: &#39;music&#39;,
      data: {
        start: this.data.playlist.length,
        count: MAX_LIMIT,
        // äº‘å‡½æ•°musicè¢«tcb-routeråŒ–åè¦ä½¿ç”¨$urlæŒ‡å®šè·¯ç”±
        $url: &#39;playlist&#39;
      }
    }).then((res) =&gt; {
      // console.log(res)
      this.setData({
        playlist: this.data.playlist.concat(res.result.data) //æ³¨æ„æ˜¯è¿½åŠ æ­Œå•æ•°æ®è€Œéæ›¿æ¢æ­Œå•æ•°æ®
      })
      wx.stopPullDownRefresh() //å…³é—­ä¸‹æ‹‰åˆ·æ–°åŠ¨ä½œ
      wx.hideLoading() //è®°å¾—å…³é—­loading
    })
  },
</code></pre>
<p><br></p>
<h3 id="-">è‡ªå®šä¹‰æ­Œæ›²åˆ—è¡¨ç»„ä»¶</h3>
<h4 id="-">è·¯ç”±è·³è½¬</h4>
<p>åœ¨é¦–é¡µçš„æ­Œå•åˆ—è¡¨ä¸­ï¼Œæ¯ç‚¹å‡»ä¸€ä¸ªæ­Œå•éƒ½è·³è½¬åˆ°ç›¸å¯¹åº”çš„æ­Œæ›²åˆ—è¡¨é‡Œé¢ï¼Œç”¨<code>wx.navigateTo</code>è¿›è¡Œè·¯ç”±è·³è½¬ï¼Œåœ¨æ­¤ä¹‹å‰è¦é…ç½®é¡µé¢è·¯ç”±ä¿¡æ¯ã€‚åœ¨<code>app.json</code>ä¸­æ·»åŠ <code>&quot;pages/musiclist/musiclist&quot;</code>ã€‚</p>
<p>ä¸ºæ­Œå•ç»„ä»¶ç»‘å®šä¸€ä¸ªç‚¹å‡»äº‹ä»¶ï¼Œç‚¹å‡»è§¦å‘å‡½æ•°<code>goToMusiclist</code>:</p>
<pre><code class="lang-js">// miniprogram/components/playlist/cmp.js   

    // æ˜¾ç¤ºæ­Œæ›²åˆ—è¡¨
    goToMusiclist() {
      wx.navigateTo({
        url: `../../pages/musiclist/musiclist?playlistId=${this.properties.playlistItem.id}`
      })
    }
</code></pre>
<p>è¿™æ ·å°±æŠŠæ­Œå•æ•°æ®çš„<code>id</code>ä½œä¸ºå‚æ•°ä¼ è¿›è·¯ç”±é‡Œäº†ï¼Œç„¶åæˆ‘ä»¬åœ¨ç›®æ ‡è·¯ç”±å¯¹åº”çš„é¡µé¢æ‰“å°å‡ºè·¯ç”±å‚æ•°ğŸ‘‡</p>
<pre><code class="lang-js">// miniprogram/pages/musiclist/musiclist.js  
  /**
   * ç”Ÿå‘½å‘¨æœŸå‡½æ•°--ç›‘å¬é¡µé¢åŠ è½½
   */
  onLoad: function (options) {
    console.log(options)
  },
</code></pre>
<p>å¯ä»¥è·å–åˆ°ä¼ è¿‡æ¥çš„å‚æ•°<code>id</code>ã€‚æ ¹æ®è¿™ä¸ª<code>id</code>å¯ä»¥å‘åç«¯apiè·å–åˆ°å¯¹åº”æ­Œæ›²åˆ—è¡¨çš„æ•°æ®</p>
<h4 id="-">è·å–æ­Œæ›²æ•°æ®</h4>
<p>å‰é¢è¯´è¿‡ï¼Œæˆ‘ä»¬è¦æŠŠ<strong>ç›¸ä¼¼çš„è¯·æ±‚å½’ç±»åˆ°åŒä¸€ä¸ªäº‘å‡½æ•°å¤„ç†</strong>ã€‚æ‰€ä»¥ï¼Œè¿™é‡ŒæŠŠè·å–æ­Œå•å¯¹åº”çš„æ­Œæ›²åˆ—è¡¨ä¿¡æ¯çš„å¤„ç†ä¹Ÿæ”¾åœ¨äº‘å‡½æ•°musicé‡Œï¼Œé€šè¿‡tcb-routerè¿›è¡Œä»»åŠ¡æ´¾å‘ã€‚</p>
<p>è¿™é‡Œæ¶‰åŠåˆ°å‘é€httpè¯·æ±‚çš„æ“ä½œï¼ˆå‘åç«¯apiå‘é€ajaxè¯·æ±‚ï¼‰ï¼Œæ‰€ä»¥åœ¨äº‘å‡½æ•°musicæ‰€åœ¨ç›®å½•ä¸‹å®‰è£…<code>request</code>å’Œ<code>request-promise</code>ä¾èµ–ã€‚</p>
<p>ç»™äº‘å‡½æ•°musicæ·»åŠ è·å–æ­Œå•å†…æ­Œæ›²åˆ—è¡¨æ•°æ®çš„è·¯ç”±å¤„ç†å‡½æ•°musiclistğŸ‘‡</p>
<pre><code class="lang-js">// cloudfunctions/music/index.js 

// å¼•å…¥request-promise
const rp = require(&#39;request-promise&#39;)

const BASE_URL = &#39;http://musicapi.xiecheng.live&#39;
//ç”¨ ctx.body è¿”å›æ•°æ®åˆ°å°ç¨‹åºç«¯
 app.router(&#39;musiclist&#39;, async (ctx, next)=&gt;{
    ctx.body = await rp(BASE_URL+&#39;/playlist/detail?id=&#39;+event.playlistId)
    .then((res)=&gt;{
      return JSON.parse(res)
    })
  })
</code></pre>
<p>ç„¶ååœ¨æ­Œå•è¯¦æƒ…é¡µå¯¹åº”çš„<code>/miniprogram/pages/musiclist/musiclist.js</code>ä¸­è·å¾—æ•°æ®å¹¶ä¿å­˜ğŸ‘‡</p>
<pre><code class="lang-js">  data: {
    //æ­Œå•è¯¦æƒ…ä¿¡æ¯
    listInfo: {},
    // æ­Œæ›²åˆ—è¡¨
    musiclist: []
  },

    /**
   * ç”Ÿå‘½å‘¨æœŸå‡½æ•°--ç›‘å¬é¡µé¢åŠ è½½
   */
  onLoad: function (options) {
    console.log(options) //å¯ä»¥è·å–åˆ°è·¯ç”±ä¼ è¿›æ¥çš„å‚æ•°ï¼Œè¿™é‡Œæ˜¯æ­Œå•id
    wx.cloud.callFunction({
      name: &#39;music&#39;,
      data:{
        playlistId: options.playlistId,
        $url: &#39;musiclist&#39;
      }
    }).then((res)=&gt;{
      // console.log(res)
      const pl = res.result.playlist
      this.setData({
        musiclist: pl.tracks,
        listInfo: {
          coverImgUrl: pl.coverImgUrl,
          name: pl.name
        }
      })
    })
  },
</code></pre>
<p>è¿™é‡Œå¯ä»¥é…ç½®ä¸€ä¸‹äº‘å‡½æ•°musicçš„è¶…æ—¶æ—¶é—´ï¼Œé»˜è®¤æ˜¯3ç§’ï¼Œè¿™å¯¼è‡´å¾ˆå¤šå›¾ç‰‡æ²¡æ¥å¾—åŠåŠ è½½é¡¹ç›®æŠ¥é”™ï¼Œæ•…å¯ä»¥åœ¨äº‘å¼€å‘æ§åˆ¶å°è®¾ç½®musicäº‘å‡½æ•°çš„è¶…æ—¶äº‹ä»¶ä¸º20ç§’ã€‚</p>
<h4 id="-musiclist">æ¸²æŸ“æ­Œå•æ­Œæ›²åˆ—è¡¨è¯¦æƒ…é¡µé¢musiclist</h4>
<p>ä»ä¸Šä¸€æ­¥å·²ç»è·å–åˆ°åç«¯æ•°æ®å¹¶ä¿å­˜åœ¨äº†musiclist.jsçš„dataä¸­äº†ï¼Œæ‰€ä»¥ç›´æ¥å¼€å§‹æ•°æ®æ¸²æŸ“å°±è¡Œäº†ã€‚</p>
<p>è¯¦æƒ…é¡µçš„å¤´éƒ¨èƒŒæ™¯å›¾è¿›è¡Œäº†é«˜æ–¯æ¨¡ç³Šçš„å¤„ç†ã€‚</p>
<pre><code class="lang-js">.detail-container{
  height: 320rpx;
  filter: blur(40rpx);  /*css3æ»¤é•œå±æ€§*/
  opacity: 0.4;
  background:url(&#39;https://pic3.zhimg.com/80/v2-a8c38e5d4225b8a5d0a4f0cd0be8fdc6_hd.jpg&#39;) no-repeat top/cover;
  /* èƒŒæ™¯å›¾é«˜æ–¯æ¨¡ç³Š */
}

.detail-mask{
  position: absolute;
  width: 100%;
  height: 320rpx;
  background-color: #aaa;
  top: 0;
  left: 0;
  z-index: -1;
}
</code></pre>
<h4 id="musiclist-">musiclistç»„ä»¶å¼€å‘</h4>
<p>ä¸Šé¢æåˆ°çš„æ­Œå•æ­Œæ›²åˆ—è¡¨è¯¦æƒ…é¡µé¢çš„å¤´éƒ¨èƒŒæ™¯å›¾å·²ç»å®Œæˆäº†ï¼Œè¯¥é¡µé¢ä¸‹é¢çš„éƒ¨åˆ†å°±æ˜¯æ­Œæ›²åˆ—è¡¨çš„å±•ç¤ºï¼Œè¿™ä¸€æ­¥å¯ä»¥å°è£…æˆä¸€ä¸ªç»„ä»¶ï¼Œæ–¹ä¾¿ä¹‹åçš„å¤ç”¨ã€‚</p>
<p>æ–°å»ºä¸€ä¸ªcomponentï¼š/miniprogram/components/musiclist/cmp</p>
<p>æˆ‘ä»¬æƒ³è¦åœ¨<code>/miniprogram/pages/musiclist/musiclist.wxml</code>ä¸­å¼•ç”¨è¯¥ç»„ä»¶ï¼Œè¦å…ˆåœ¨<code>/miniprogram/pages/musiclist/musiclist.json</code>ä¸­è¿›è¡Œæ³¨å†Œå¼•å…¥ğŸ‘‡</p>
<pre><code class="lang-json">{
  &quot;usingComponents&quot;: {
    &quot;musiclist-cmp&quot;: &quot;/components/musiclist/cmp&quot;
  }
}
</code></pre>
<p>ç„¶ååœ¨ä½¿ç”¨ç”¨è¿™ä¸ªç»„ä»¶çš„æ—¶å€™ï¼Œå°†æ­Œæ›²æ•°æ®ä½œä¸ºå…¶å±æ€§å€¼ä¼ å…¥ï¼Œ<code>musiclist-cmp</code>ç»„ä»¶åœ¨<code>musiclist/cmp.js</code>ä¸­çš„<code>properties</code>ä¸­è¿›è¡Œæ¥æ”¶ã€‚</p>
<p>ä¹‹åå°±å¯ä»¥è¿›è¡Œå¸ƒå±€å’Œæ•°æ®æ¸²æŸ“å®ç°è¯¥ç»„ä»¶çš„é¡µé¢æ˜¾ç¤ºéƒ¨åˆ†äº†ã€‚</p>
<h2 id="4-">4.æ’­æ”¾å™¨åŠŸèƒ½å®ç°</h2>
<pre><code>- åª²ç¾åŸç”Ÿä½“éªŒçš„å°ç¨‹åºéŸ³ä¹æ’­æ”¾å™¨
- æ­Œè¯è§£æå’Œæ’­æ”¾äº‹ä»¶è”åŠ¨
- æ€§èƒ½ä¼˜åŒ–
- å¼•å…¥iconfontå­—ä½“å›¾æ ‡
</code></pre><h2 id="5-">5.ã€å‘ç°ã€‘åŠŸèƒ½å®ç°</h2>
<pre><code>- è¯¥åŠŸèƒ½ç±»ä¼¼åšæ–‡å‘å¸ƒ
- å°ç¨‹åºç”¨æˆ·ä¿¡æ¯æˆæƒæµç¨‹
- å¤šæ–‡ä»¶ä¸Šä¼ äº‘å­˜å‚¨å¼‚æ­¥æ“ä½œ
- äº‘æ•°æ®åº“æ¨¡ç³ŠæŸ¥è¯¢ã€ç´¢å¼•æŸ¥è¯¢ã€æƒé™æŸ¥è¯¢
</code></pre><h2 id="6-">6.è¯„è®ºä¸åˆ†äº«</h2>
<pre><code>- äº‘æ•°æ®åº“ä¸­1å¯¹Nå…³ç³»çš„ä¸‰ç§è®¾è®¡æ–¹å¼
- äº‘è°ƒç”¨å®ç°æ¨¡æ¿æ¶ˆæ¯æ¨é€
- äº‘æ•°æ®åº“å¤šé›†åˆæŸ¥è¯¢
- åšå®¢åˆ†äº«ç»™å¥½å‹
</code></pre><h2 id="7-">7.ã€æˆ‘çš„ã€‘åŠŸèƒ½å®ç°</h2>
<pre><code>- å¯¹æ¯”ä¸åŒæ–¹å¼è·å–ç”¨æˆ·ä¿¡æ¯çš„åº”ç”¨åœºæ™¯
- æœ¬åœ°å­˜å‚¨æ’­æ”¾å†å²
- äº‘å‡½æ•°è°ƒç”¨äº‘æ•°æ®åº“ä¸å°ç¨‹åºè°ƒç”¨äº‘æ•°æ®åº“çš„å·®åˆ«
- äº‘è°ƒç”¨ç”Ÿæˆå°ç¨‹åºç 
</code></pre><h2 id="8-">8.å°ç¨‹åºé«˜çº§çŸ¥è¯†</h2>
<pre><code>- å°ç¨‹åºæ¸²æŸ“å±‚ä¸é€»è¾‘å±‚äº¤äº’åŸç†
- å°ç¨‹åºè¿è¡Œæœºåˆ¶ä¸æ›´æ–°æœºåˆ¶
- å°ç¨‹åºæ€§èƒ½ä¸ä½“éªŒä¼˜åŒ–
- å°ç¨‹åºä¸Šçº¿å®¡æ ¸æµç¨‹
- å°ç¨‹åºåœºæ™¯å€¼çš„åº”ç”¨
</code></pre><h2 id="9-">9.åå°ç®¡ç†ç³»ç»Ÿ</h2>
<pre><code>- å‰åç«¯åˆ†ç¦»æ¶æ„çš„åå°ç®¡ç†ç³»ç»Ÿ
- vue-admin-templateæ„å»ºç®¡ç†ç³»ç»Ÿå‰ç«¯
- Koa2æ„å»ºç®¡ç†ç³»ç»Ÿåç«¯
- HTTP APIè®¿é—®äº‘å¼€å‘èµ„æº
</code></pre>
          	</article>
        </div>
		</div>
  </body>
</html>
<script type="text/javascript" src="toc/js/jquery-1.4.4.min.js"></script>
<script type="text/javascript" src="toc/js/jquery.ztree.all-3.5.min.js"></script>
<script type="text/javascript" src="toc/js/ztree_toc.js"></script>
<script type="text/javascript" src="toc_conf.js"></script>

<SCRIPT type="text/javascript" >
<!--
$(document).ready(function(){
    var css_conf = eval(markdown_panel_style);
    $('#readme').css(css_conf)
    
    var conf = eval(jquery_ztree_toc_opts);
		$('#tree').ztree_toc(conf);
});
//-->
</SCRIPT>